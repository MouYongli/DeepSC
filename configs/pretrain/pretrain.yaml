defaults:
  - _self_
  - model: deepsc
  - data: default
  - loss: default
  - logging: default
  - system: default
  - experiment: default
  - scheduler: default
  - override hydra/job_logging: colorlog

seed: 42
valid_every: 2000
model_name: "DeepSC"
grad_acc: 20
learning_rate: 3e-4
epoch: 10
batch_size: 8
num_bin: 5

resume_last_training: True
save_ckpt: True
save_ckpt_every: 2000
sequence_length: 1024
check_grad_flow: False  # 是否启用梯度检查 多卡的时候不需要启用

chunk_size: ${data.chunk_size}
enable_l0: ${loss.enable_l0}
enable_mse: ${loss.enable_mse}
enable_ce: ${loss.enable_ce}
use_moe_regressor: ${experiment.use_moe_regressor}
use_M_matrix: ${experiment.use_M_matrix}
use_moe_ffn: ${experiment.use_moe_ffn}



hydra:
  # Logging configuration: https://hydra.cc/docs/tutorials/basic/running_your_app/logging/
  verbose: false
  # Logs to stdout and to a file.
  job_logging:
    handlers:
      console:
        class: logging.StreamHandler
        stream: ext://sys.stdout
      file:
        filename: ${hydra.runtime.output_dir}/${hydra.job.name}_${oc.select:hydra.job.num, 0}.log

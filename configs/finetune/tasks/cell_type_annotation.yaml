# Cell Type Annotation Task Configuration

# Dataset settings
seperated_train_eval_dataset: False
data_path: "/home/angli/baseline/DeepSC/data/cell_type_annotation/myeloid_merged.h5ad"
data_path_eval: "/home/angli/baseline/DeepSC/data/cell_type_annotation/human_pancreas/hPancreas_test_adata.h5ad"
var_name_in_h5ad: "gene_name"
obs_celltype_col: "MajorCluster"
test_size: 0.2  # Ratio for train/test split when seperated_train_eval_dataset is False

# Loss configuration (used by model config)
enable_l0: False
enable_mse: False
enable_ce: False
cls_loss_type: "per_bin"

# ==============================================================================
# TEST-ONLY CONFIGURATIONS
# ==============================================================================
# The following configurations are used only during testing (cta_test.py)
# They are ignored during training.
# ==============================================================================

# Checkpoint path for testing - specify the trained model checkpoint to evaluate
checkpoint_path: "/home/angli/baseline/DeepSC/results/cell_type_annotation/best_model.pt"

# Test results save directory - results will be saved in timestamped subdirectories
test_save_dir: "/home/angli/baseline/DeepSC/results/cell_type_annotation"

# ==============================================================================
# UNUSED CONFIGURATIONS (Commented out - not currently used in the code)
# ==============================================================================
# The following configurations are defined but not actively used in:
#   - src/deepsc/finetune/finetune.py
#   - src/deepsc/finetune/cell_type_annotation.py
# They are kept here for reference and potential future use.
# ==============================================================================

# # WandB settings
# tags: ["256hd", "cell_type_annotation"]
# run_name: "finetune_cell_type_annotation_256hd"

# # Dataset settings (unused)
# data_length: 5000

# # Model settings (unused)
# model_name: "DeepSC_heart9_blood_others_blood"

# # Loss weights (unused)
# ce_loss_weight: 1.0
# target_mse_loss_weight: 3.0
# adaptive_mse_weight: False

# # MoE Regressor settings (unused)
# use_moe_regressor: True  # 是否使用MoE回归器，False则使用原来的简单回归器
# # True:  使用MoE回归器（3个专家网络：low/mid/high expert + gate网络）
# # False: 使用原来的简单回归器（单一sequential网络）

# # L0 loss warmup parameters (unused)
# l0_warmup_start_epoch: 2  # 从第几个epoch开始加入l0 loss,并在一个epoch内线性增加到l0_lambda
# enable_l0_warmup: False
# l0_lambda: 0.1

# # 数据增强相关 (unused)
# enable_data_augmentation: True  # 是否启用数据增强（动态掩码概率）

# # 分类任务 (unused)
# # 最多只能打开一个开关
# weighted_ce_loss: False
# mean_ce_loss: True
# use_ldam_loss: False
# enable_adaptive_ce_loss: False
# enable_alternating_ldam_mean_ce_loss: False
# enable_warm_alternating_ldam_mean_ce_loss: False

# # 回归任务 (unused)
# # 最多只能打开一个开关 选择huber还是mse
# enable_mse_loss: False
# enable_huber_loss: True
# # 回归任务
# # 最多只能打开一个开关 选择普通的还是加权的
# use_normal_regression_loss: True
# use_hard_regression_loss: False
# use_exp_regression_loss: False

# # Logging and visualization (unused)
# show_mse_loss_details: False
# log_m_matrix_every: 1000
# plot_tsne_and_umap: False
# draw_continuous_pred_label_scatter: True

# # 评估策略 (unused)
# eval_use_all_common_types: true  # true: 显示所有共同类型(即使当前batch中为0), false: 只显示当前batch存在的类型
